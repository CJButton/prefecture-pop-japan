(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},11:function(e,t,a){e.exports=a(20)},17:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),s=(a(17),a(2)),i=a.n(s),u=a(4),l=a(3),p=a(5),d=a(1),f=(a(19),a(9)),m=a.n(f),b=a(6),h=a.n(b),v=a(10),O=a.n(v),x={"Content-Type":"text/html","Accept-Charset":"utf-8","X-API-KEY":"xYEnhEhFcvudNNKwrmCqRKcJkRA4xN3LJiHdPJVw"},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a="?cityCode".concat(t,"&prefCode=").concat(e),n="api/v1/population/composition/perYear".concat(a);return w(n,{method:"GET"})},w=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n,r,c,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=a.method,r="".concat("https://opendata.resas-portal.go.jp","/").concat(t),e.prev=3,e.next=6,fetch(r,{method:n,headers:x});case 6:return c=e.sent,e.abrupt("return",c.json());case 10:e.prev=10,e.t0=e.catch(3),console.error("request error");case 13:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.elementsArr,a=e.checkedObj,n=e.elementKey,c=e.callback;return t.map(function(e){return r.a.createElement("label",{className:"checkbox--label",key:"checkbox-".concat(e[n])},r.a.createElement("input",{type:"checkbox",checked:a[e[n]],onChange:function(){return c(e)}}),e[n])})},k={credits:{enabled:!0,text:"Created by Christopher Button 2019"},title:{text:"",align:"center"},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},yAxis:{},xAxis:{},series:[]},y=function(e){var t=e.callback,a=e.openStatus,n=e.errorType,c=a?"modal display-block":"modal display-none",o={initial:{action:function(){return window.location.reload()},buttonText:"\u3082\u3046\u4e00\u5ea6\u8a66\u3059",message:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"},fetchPrefecture:{action:function(){return t()},buttonText:"\u9589\u3058\u308b",message:"\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}};return r.a.createElement("div",{className:c},r.a.createElement("section",{className:"modal-main"},o[n].message,r.a.createElement("button",{className:"button-basic",onClick:o[n].action},o[n].buttonText)))},E=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(d.a)(o,2),f=s[0],b=s[1],v=Object(n.useState)({}),x=Object(d.a)(v,2),E=x[0],N=x[1],S=Object(n.useState)([]),C=Object(d.a)(S,2),A=C[0],J=C[1],T=Object(n.useState)(!0),K=Object(d.a)(T,2),P=K[0],B=K[1],I=Object(n.useState)(!1),M=Object(d.a)(I,2),R=M[0],Y=M[1],q=Object(n.useState)("initial"),F=Object(d.a)(q,2),G=F[0],L=F[1],W=Object(n.useState)(""),H=Object(d.a)(W,2),V=H[0],X=H[1],$=Object(n.useRef)(),z=function(e){return a.series.findIndex(function(t){return t.name===e})},D=function(e,t){b(!0);var n=JSON.parse(JSON.stringify(a));n.series.splice(e,1),N(Object(p.a)({},E,Object(l.a)({},t,!1))),c(n),b(!1)},Q=function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r,o,s,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.prefName,r=t.prefCode,b(!0),!((o=z(n))>-1)){e.next=5;break}return e.abrupt("return",D(o,n));case 5:return e.prev=5,e.next=8,j(r);case 8:if(!(s=e.sent).statusCode){e.next=11;break}throw new Error(s);case 11:u={name:n,data:s.result.data[0].data.map(function(e){return e.value})},(d=JSON.parse(JSON.stringify(a))).series.push(u),c(d),N(Object(p.a)({},E,Object(l.a)({},n,!0))),b(!1),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),U(e.t0,"fetchPrefecture");case 22:case"end":return e.stop()}},e,null,[[5,19]])}));return function(t){return e.apply(this,arguments)}}(),U=function(e,t){console.error(e),L(t),Y(!0)};return Object(n.useEffect)(function(){!function(){var e=Object(u.a)(i.a.mark(function e(){var t,a,n,r,o,s,u,d,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("api/v1/prefectures",{method:"GET"});case 3:if(!(t=e.sent).statusCode){e.next=6;break}throw new Error(t);case 6:return a=Math.floor(Math.random()*Math.floor(t.result.length)),n=t.result[a],r=n.prefCode,o=n.prefName,e.next=10,j(r);case 10:if(!(s=e.sent).statusCode){e.next=13;break}throw new Error(s);case 13:u=t.result.reduce(function(e,t){return Object(p.a)({},e,Object(l.a)({},t.prefName,!1))},{}),B(!1),N(Object(p.a)({},u,Object(l.a)({},o,!0))),J(t.result),d=s.result.data[0].label,X(d),(f=JSON.parse(JSON.stringify(k))).yAxis={title:{text:d}},f.xAxis={categories:s.result.data[0].data.map(function(e){return e.year})},f.series.push({name:o,data:s.result.data[0].data.map(function(e){return e.value})}),c(f),$.current.container.current.style.width="100%",$.current.chart.reflow(),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),U(e.t0,"initial");case 32:case"end":return e.stop()}},e,null,[[0,29]])}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"App"},r.a.createElement(y,{openStatus:R,errorType:G,callback:function(){Y(!1),b(!1)},updateLoader:b}),r.a.createElement("header",{className:"App-header"},(f||P)&&r.a.createElement("img",{src:O.a,className:"App-logo",alt:"logo"}),P?null:r.a.createElement(r.a.Fragment,null,V,r.a.createElement("div",{className:"checkbox-wrapper"},r.a.createElement(g,{elementsArr:A,checkedObj:E,callback:Q,elementKey:"prefName"})),r.a.createElement(m.a,{highcharts:h.a,options:a,ref:$}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.ebfe71a4.chunk.js.map